FROM nginx:latest

WORKDIR /app
EXPOSE 80 443

# Static files will be mounted via volume from web container
# Create directory in case volume is empty initially
RUN mkdir -p /app/static

# Copy nginx configs
COPY nginx.conf /etc/nginx/conf.d/default.conf
COPY nginx-http-only.conf /etc/nginx/conf.d/nginx-http-only.conf

# Copy and set up entrypoint script
COPY nginx-entrypoint.sh /docker-entrypoint.d/nginx-entrypoint.sh
RUN chmod +x /docker-entrypoint.d/nginx-entrypoint.sh
